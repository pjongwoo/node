<!doctype html>
<html lang="ko">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title><%= title %></title>
    <style>
        .img-responsive{width:200px;}
    </style>
    <%- include('head'); %>
</head>
<body id="page-top">
    <div class="wrap">
    <%- include('menu'); %>

    <div id ='container'><!-- body 시작-->
        <div style="position: relative;
        margin: 0 auto;
        width: 80%;
        top: 50%;">
         <div style="display: flex;margin-bottom: 10px;justify-content: space-between;">
             <h3 class="text-center"><%= title %></h3>
            <button type="button" class="btn btn-primary" style="z-index: 9999;">
                <a style="
                text-decoration: none;
                color: #fff;"
                href="/mongo/write">
                글쓰기
                </a>
            </button>
         </div>
         <table class="table table-bordered">
            <thead>
                <tr>
                    <th scope="col" style="text-align: center;padding: 1%;">작성자</th>
                    <th scope="col" style="text-align: center;padding: 1%;">대표이미지</th>
                    <th scope="col" style="text-align: center;padding: 1%;">제목</th>
                    <th scope="col" style="text-align: center;padding: 1%;">조회수</th>
                    <th scope="col" style="text-align: center;padding: 1%;">수정일</th>
                    <th scope="col" style="text-align: center;padding: 1%;">등록일</th>
                </tr>
            </thead>
            <tbody style="text-align:center;">
                <%
                for(var i=(page*page_num)-page_num; i<(page*page_num) ; i++){
                if(i>length){
                    i++;
                }else{
                    var data = rows[i];
                %>
                <tr>
                    <td class="align-middle" scope="row"><%= data.name %></td>
                    <td><img class="img-responsive align-middle" src="/<%= data.mainImg %>"/></td>
                    <td class="align-middle"><a href="/mongo/read/<%= data._id %>"><%= data.title %></a></td>
                    <td class="align-middle"><%= data.hit %></td>
                    <td class="align-middle"><%= data.stmodidate %></td>
                    <td class="align-middle"><%= data.stregdate %></td>
                </tr>
                <%
                }
                }
                %>
                <tr>
                    <td colspan="6">
                        <nav>
                            <ul class="pagination">
                                <li>
                                    <a href="/mongo/page/1" aria-label="Previous">
                                        <span aria-hidden="true">&laquo;</span>
                                    </a>
                                </li>
                                <%
                                for(var j=0 ; j<rows.length / page_num ; j++){
                                %>
                                    <li <%if(page == j+1){%> class="active" <%}%>><a href="/mongo/page/<%= j+1 %>"><%= j+1 %></a></li>
                                <%
                                }
                                %>
                                <li>
                                    <a href="/mongo/page/<%= rows.length / page_num  %>" aria-label="Next">
                                        <span aria-hidden="true">&raquo;</span>
                                    </a>
                                </li>
                            </ul>
                        </nav>

                    </td>
                </tr>
            </tbody>
            </table>
        </div>
    </div><!-- body 종료-->
    </div>
    <%- include('footer'); %>
</div>

</body>
</html>