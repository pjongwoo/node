<!doctype html>
<html lang="ko">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title><%= title %></title>
    <%- include('head'); %>
</head>
<body>
<div class="wrap">
    <%- include('menu'); %>
    <div id ='container'><!-- body 시작-->
        <div style="
            max-width: 960px;
            margin: 0 auto;
            position: relative;
        ">
            <h3 style="text-align: center;
            font-weight: bold;"><%= title %></h3>

            <form action="/mongo/write" method="post" enctype="multipart/form-data">
                <table class="table table-bordered">
                    <tr>

                        <td scope="col" style="text-align: center;
                        font-weight: normal;
                        font-family: 'Nanum Barun Gothic';
                        background: #fbfbfb;
                        color: #222;border-right: dashed 1px #e5e5e5;"> <span class="vital" style="color: #ed1a3a; display: inline-block;">*</span> 작성자</td>
                        <td><%=name%><input type="hidden" name="name" id="name" value="<%=name%>" readonly required/></td>
                    </tr>
                    <tr>
                        <td style="text-align: center;
                        font-weight: normal;
                        font-family: 'Nanum Barun Gothic';
                        background: #fbfbfb;
                        color: #222;border-right: dashed 1px #e5e5e5;"> <span class="vital" style="color: #ed1a3a; display: inline-block;">*</span> 제목</td>
                        <td><input type="text" name="title" id="title" required/></td>
                    </tr>
                    <tr>
                        <td style="text-align: center;
                        font-weight: normal;
                        font-family: 'Nanum Barun Gothic';
                        background: #fbfbfb;
                        color: #222;border-right: dashed 1px #e5e5e5;"> <span class="vital" style="color: #ed1a3a; display: inline-block;">*</span>내용</td>
                        <td>
                            <div id="contsArea">
                                <div class="contsGroup">
                                    <span class="txtIdx">1</span><input type="file" class="recpImgFile" name="recpImgFile" id="recpImgFile1"/><input type="text"  class="recpDtlConts" name="recpDtlConts1" id="recpDtlConts1"/>
                                </div>
                            </div>
                            <div class="btns">
                                <input type="button" class="btnAdd btn btn-success" value="추가하기"/>
                                <input type="button" class="btnRemove btn btn-danger" value="제거하기"/>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            <div style="
                            display: flex;
                            flex: 1;
                            justify-content: center;
                            ">
                                <button type="submit" class="btn btn-primary" style="    margin-right: 10px;"> <b> 글쓰기 </b>  </button>

                                <button type="button" class="btn btn-warning"><a style="font-weight: bold;color:#f8f9fa;text-decoration: none;"href="/mongo/page">목록</a></button>

                            </div>
                        </td>
                    </tr>
                </table>

                <style>
                    #contsArea .contsGroup {margin-bottom: 10px;}
                    #contsArea .contsGroup span , #contsArea .contsGroup input{display: inline-block;}
                    #contsArea .contsGroup .txtIdx{width:10%;}
                    #contsArea .contsGroup .recpImgFile{width:40%;}
                    #contsArea .contsGroup .recpDtlConts{width:50%;}
                    .btns{text-align: center; margin-top: 20px;}
                </style>
            </form>
            <script type="text/javascript">
                var oEditors = [];
                var htmlStr = $('#contsArea').html();

                var $htmlStrObj = $(htmlStr);

                // 추가하기
                $('.btnAdd').click(function(){
                    var $lastContsGroup = $('.contsGroup').last();
                    var currIdx = Number($lastContsGroup.find('.txtIdx').text()) + 1;

                    $htmlStrObj.find('.txtIdx').text(currIdx);
                    $htmlStrObj.find('.recpImgFile').text($htmlStrObj.find('.recpImgFile').attr('id', 'recpImgFile' + currIdx));
                    $htmlStrObj.find('.recpDtlConts').text($htmlStrObj.find('.recpDtlConts').attr('name', 'recpDtlConts' + currIdx));
                    $htmlStrObj.find('.recpDtlConts').text($htmlStrObj.find('.recpDtlConts').attr('id', 'recpDtlConts' + currIdx));

                    $('.contsGroup').last().after($htmlStrObj.clone());
                });

                // 삭제하기
                $('.btnRemove').click(function(){
                    $('.contsGroup').last().remove();
                });

            </script>

        </div>
    </div><!-- body 종료-->

</div>
<%- include('footer'); %>
</body>
</html>